{"version":3,"sources":["../../src/pages/newreg/newreg.module.ts","../../src/pages/newreg/newreg.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACV;AAUtC;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAR5B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;aACrC;SACF,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACZa;AAC0B;AACX;AACF;AAClB;AACS;AAE9C;;;;;GAKG;AAOH;IASE,oBAAmB,IAAU,EAAS,OAAgB,EAAS,OAAe,EAAS,GAAQ,EAAS,OAAsB,EAAS,SAAoB,EAAE,WAAwB,EAAU,MAAc;QAA7M,iBAYC;QAZkB,SAAI,GAAJ,IAAI,CAAM;QAAS,YAAO,GAAP,OAAO,CAAS;QAAS,YAAO,GAAP,OAAO,CAAQ;QAAS,QAAG,GAAH,GAAG,CAAK;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAoC,WAAM,GAAN,MAAM,CAAQ;QAC3M,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC,KAAK,CAAC;YAC9B,cAAc,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACzC,YAAY,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACvC,kBAAkB,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,OAAO,CAAC,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC7F,QAAQ,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,OAAO,CAAC,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,kEAAU,CAAC,OAAO,CAAC,kEAAkE,CAAC,CAAC,CAAC,CAAC;YAC1K,eAAe,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,OAAO,CAAC,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,kEAAU,CAAC,OAAO,CAAC,kEAAkE,CAAC,CAAC,CAAC,CAAC;SAClL,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,SAAS,CAAC,UAAC,CAAC;YACnC,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC;QAC5C,CAAC,CAAC,CAAC;IACL,CAAC;IAGD,mCAAc,GAAd;QACE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAC9C,CAAC;IAED,qCAAgB,GAAhB;QACE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IACnB,CAAC;IAED,qCAAgB,GAAhB;QACE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;IACpB,CAAC;IAED,8BAAS,GAAT;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAClC,CAAC;IAED,eAAe;IACf,mEAAmE;IACnE,iEAAiE;IACjE,IAAI;IAEJ,mBAAmB;IACnB,kEAAkE;IAClE,kEAAkE;IAClE,IAAI;IAEJ,oCAAe,GAAf;QAAA,iBAsCC;QArCC,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;YACnE,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,yBAAyB,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;YACnE,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QAC9C,IAAI,GAAG,GAAG;YACR,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,eAAe;YAClD,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;YACpC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,YAAY;YAC5C,cAAc,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,cAAc;YAChD,kBAAkB,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,kBAAkB;YACvD,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW;YAClC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI;YAC1B,yBAAyB;SAC3B,CAAC;QAEF,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;YACvD,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC;YACnC,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACpB,EAAE,EAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;gBACpB,KAAI,CAAC,OAAO,CAAC,eAAe,CAAC,KAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBACpD,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,KAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAClD,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,KAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC/C,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAChD,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAE9C,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;YACxC,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;YACpD,CAAC;QAEH,CAAC,EAAE,UAAC,KAAS;YACX,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACpB,KAAI,CAAC,GAAG,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QAC5D,CAAC,CAAC;IACJ,CAAC;IAxFU,UAAU;QAJtB,wEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACG;SAC3B,CAAC;mBAU6M;OATlM,UAAU,CAyFtB;IAAD,CAAC;AAAA;SAzFY,UAAU,e","file":"31.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NewregPage } from './newreg';\n\n@NgModule({\n  declarations: [\n    NewregPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(NewregPage),\n  ],\n})\nexport class NewregPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/newreg/newreg.module.ts","import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Loader, Api, Session } from '../../providers';\nimport { Idle } from '@ng-idle/core';\nimport { Device } from '@ionic-native/device';\n\n/**\n * Generated class for the NewregPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-newreg',\n  templateUrl: 'newreg.html',\n})\nexport class NewregPage {\n  isReadyToProceed: boolean;\n\n  newreg: FormGroup;\n\n  phoneNumber: string;\n\n  data: any;\n\n  constructor(public idle: Idle, public session: Session, public loading: Loader, public api: Api, public navCtrl: NavController, public navParams: NavParams, formBuilder: FormBuilder, private device: Device) {\n    this.newreg = formBuilder.group({\n      secretQuestion: ['', Validators.required],\n      secretAnswer: ['', Validators.required],\n      secretQuestionHint: ['', Validators.compose([Validators.required, Validators.maxLength(10)])],\n      password: ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.pattern('^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-.,]).{8,}$')])],\n      confirmPassword: ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.pattern('^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-.,]).{8,}$')])],\n    });\n\n    this.newreg.valueChanges.subscribe((v) => {\n      this.isReadyToProceed = this.newreg.valid;\n    });\n  }\n\n\n  ionViewDidLoad() {\n    this.data = this.navParams.get('wholeData');\n  }\n\n  ionViewWillEnter() {\n    this.idle.stop();\n  }\n\n  ionViewWillLeave() {\n    this.idle.watch();\n  }\n\n  gotoLogin() {\n    this.navCtrl.push('SigninPage');\n  }\n\n  // gotoNext() {\n  //   document.getElementById(\"secondForm\").style.display = \"block\";\n  //   document.getElementById(\"firstForm\").style.display = \"none\";\n  // }\n\n  // gotoPrevious() {\n  //   document.getElementById(\"secondForm\").style.display = \"none\";\n  //   document.getElementById(\"firstForm\").style.display = \"block\";\n  // }\n\n  newRegistration() {\n    if(this.newreg.value.password != this.newreg.value.confirmPassword) {\n      this.api.messageHandler('Password does not match', 5000, 'bottom');\n      return;\n    }\n    this.loading.show('Updating your account...');\n    var req = {\n      confirmPassword: this.newreg.value.confirmPassword,\n      password: this.newreg.value.password,\n      secretAnswer: this.newreg.value.secretAnswer,\n      secretQuestion: this.newreg.value.secretQuestion,\n      secretQuestionHint: this.newreg.value.secretQuestionHint,\n       phoneNumber: this.data.phoneNumber,\n       deviceId: this.device.uuid\n       //deviceId: 'df1284ucnod'\n    };\n\n    console.log(req, 'Body');\n    this.api.post('reregister-user', req).subscribe((res: any) => {\n      console.log('ReReg Response', res);\n      this.loading.hide();\n      if(res.code == '00') {\n        this.session._setPhoneNumber(this.data.phoneNumber);\n        this.session._setSessionKey(this.data.sessionKey);\n        this.session._setEmail(this.data.emailAddress);\n        this.session._setFirstname(this.data.firstName);\n        this.session._setLastname(this.data.lastName);\n\n        this.navCtrl.setRoot('DashboardPage');\n      }\n      else {\n        this.api.messageHandler(res.message, 5000, 'top');\n      }\n\n    }, (error:any) => {\n      this.loading.hide();\n      this.api.messageHandler(error.error.message, 5000, 'top');\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/newreg/newreg.ts"],"sourceRoot":""}