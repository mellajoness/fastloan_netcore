{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"32.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\nimport { FingerprintAIO } from '@ionic-native/fingerprint-aio';\nimport { IonicPage, NavController, MenuController, ToastController} from 'ionic-angular';\nimport { Idle } from '@ng-idle/core'\n\nimport { User } from '../../providers';\nimport { Loader, Api, Session } from '../../providers';\ndeclare let Smartech:any;\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n  isReadyToProceed: boolean;\n\n  form: FormGroup;\n\n  // Our translated text strings\n  private loginErrorString: string;\n\n  phoneNumber: string;\n\n  isFingerPrint: boolean;\n\n  hasFingerPrint: boolean = false;\n\n  //fingerprintOptions : FingerprintOptions;\n\n  constructor(public navCtrl: NavController,\n    public user: User,\n    public api: Api,\n    public idle: Idle,\n    public toastCtrl: ToastController,\n    public loading: Loader,\n    public storage: Storage,\n    public session: Session,\n    formBuilder: FormBuilder,\n    public menu: MenuController,\n    private faio: FingerprintAIO,\n    public translateService: TranslateService) {\n\n    this.translateService.get('LOGIN_ERROR').subscribe((value) => {\n      this.loginErrorString = value;\n    })\n\n    this.form = formBuilder.group({\n      phoneNumber: ['', Validators.compose([Validators.required, Validators.maxLength(11), Validators.minLength(11), Validators.pattern('[0-9]{11}')])],\n      isFingerPrint: [false]\n    });\n\n    this.form.valueChanges.subscribe((v) => {\n      this.isReadyToProceed = this.form.valid;\n    });\n\n  }\n\n  ionViewWillEnter() {\n    this.idle.stop();\n  }\n\n  ionViewWillLeave() {\n    this.idle.watch();\n  }\n\n  ionViewDidEnter() {\n    //this.menu.enable(false);\n    /*this.faio.isAvailable().then(result =>{\n      result == 'finger' ? this.hasFingerPrint = true : console.log('device does not have finger print');\n    });\n    this.storage.get(\"usingBiometric\").then((res) => {\n      if(res) {\n          this.storage.get(\"phoneNumber\").then((PhoneNumber) => {\n            this.form.value.phoneNumber = PhoneNumber;\n            this.showFingerprintAuthDlg();\n          })\n      }\n      return;\n    })*/\n  }\n\n  FingerPrintAuth() {\n    if(this.form.value.isFingerPrint) {\n      this.showFingerprintAuthDlg();\n    }\n    return;\n  }\n\n  showFingerprintAuthDlg(){\n    this.faio.show({\n      clientId: 'Fingerprint-Demo',\n      clientSecret: 'password', // Only Android\n      localizedFallbackTitle: 'Use Pin', // Only iOS\n      localizedReason: 'Please authenticate'\n    })\n          .then((result: any) => {\n            this.storage.set(\"usingBiometric\", true);\n            this.storage.set(\"phoneNumber\", this.form.value.phoneNumber);\n            this.doContinue();\n          })\n          .catch((error: any) => console.log(error));\n    /*this.fingerprintOptions = {\n        clientId: 'fingerprint-Demo',\n        clientSecret: 'password', //Only necessary for Android\n        disableBackup:true  //Only for Android(optional)\n    }*/\n\n  }\n\n  doContinue() {\n    this.phoneNumber = this.session._injectCountryCode(this.form.value.phoneNumber);\n    console.log('Phone Number', this.phoneNumber);\n    this.loading.show('Sending OTP to phone...');\n      this.api.get('Mobile/request-verification/' + this.phoneNumber).subscribe((res: any) => {\n        this.loading.hide();\n        console.log(res);\n        if(res.code == '00') {\n\n          const payload = {\n           EMAIL: this.form.value.email,\n           PHONE:  this.session._injectCountryCode(this.form.value.phoneNumber),\n         }\n           Smartech.setIdentity(payload.EMAIL);\n           Smartech.track(\"REGISTER_STEP_1\",payload);\n\n          this.navCtrl.push('RegisterPage', {phone: this.phoneNumber});\n        }\n        else {\n          const payload = {\n            EMAIL: this.form.value.email,\n            PHONE:  this.session._injectCountryCode(this.form.value.phoneNumber),\n          }\n            Smartech.setIdentity(payload.EMAIL);\n            Smartech.track(\"REGISTER_STEP_1_FAILED\",payload);\n \n           this.navCtrl.push('RegisterPage', {phone: this.phoneNumber});\n          this.api.messageHandler(res.message, 5000);\n        }\n      }, (error) => {\n        this.loading.hide();\n        this.api.messageHandler(error.error.message);\n      })\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}