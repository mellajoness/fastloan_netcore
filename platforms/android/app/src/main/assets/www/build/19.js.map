{"version":3,"sources":["../../src/pages/selectloan/selectloan.module.ts","../../src/pages/selectloan/selectloan.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACF;AACQ;AAWtD;IAAA;IAAmC,CAAC;IAAvB,oBAAoB;QAThC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,mEAAc;aACf;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,mEAAc,CAAC;gBACxC,4EAAe,CAAC,QAAQ,EAAE;aAC3B;SACF,CAAC;OACW,oBAAoB,CAAG;IAAD,2BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACdS;AACkE;AACrD;AACd;AACc;AAIvD;;;;;GAKG;AAOH;IAwBE,wBAAmB,gBAAkC,EAAS,OAAgB,EAAS,SAA0B,EAAS,OAAgB,EAAS,SAA0B,EAAS,OAAsB,EAAS,SAAoB,EAAS,SAA0B,EAAS,GAAQ,EAAS,OAAe;QAArT,iBAQC;QARkB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAAS,YAAO,GAAP,OAAO,CAAS;QAAS,cAAS,GAAT,SAAS,CAAiB;QAAS,YAAO,GAAP,OAAO,CAAS;QAAS,cAAS,GAAT,SAAS,CAAiB;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,cAAS,GAAT,SAAS,CAAiB;QAAS,QAAG,GAAH,GAAG,CAAK;QAAS,YAAO,GAAP,OAAO,CAAQ;QAdrT,iBAAY,GAAQ,EAAE,CAAC;QAEvB,oBAAe,GAAQ,EAAE,CAAC;QAE1B,YAAO,GAAS,EAAE,CAAC;QAMnB,WAAM,GAAY,KAAK,CAAC;QAExB,oBAAe,GAAY,KAAK,CAAC;QAG/B,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,SAAS,CAAC,UAAC,KAAK;YAC5D,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC/B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC,UAAC,KAAK;YACzD,KAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC5B,CAAC,CAAC;IACJ,CAAC;IAED,uCAAc,GAAd;QACE,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAE1B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;QAElD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;QAEhD,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,wCAAe,GAAf;QAAA,iBAmBC;QAlBC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC;QAC9C,IAAI,CAAC,MAAM,GAAG,IAAI;QAClB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,0BAA0B,EAAE,EAAC,aAAa,EAAC,IAAI,CAAC,WAAW,EAAC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;YACnI,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAC,GAAG,CAAC;YACnC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;gBACrB,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC;gBAC7B,EAAE,EAAE,CAAC,KAAI,CAAC,YAAY,CAAC,MAAO,CAAC,CAAC,CAAC;oBAC/B,KAAI,CAAC,sBAAsB,EAAE,CAAC;gBAChC,CAAC;gBACD,SAAS;YACX,CAAC;QAEH,CAAC,EAAE,UAAC,KAAK;YACP,KAAI,CAAC,GAAG,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC/C,CAAC,EAAE;YACD,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACpB,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACtB,CAAC,CAAC;IACJ,CAAC;IAED,kCAAS,GAAT,UAAU,SAAS;QACjB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,UAAU,CAAC;YACT,SAAS,CAAC,QAAQ,EAAE,CAAC;QACvB,CAAC,EAAE,IAAI,CAAC,CAAC;IACX,CAAC;IAED,4CAAmB,GAAnB,UAAoB,OAAmB;QAAvC,iBA2BC;QA1BC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACrB,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,EAAE,EAAC,OAAO,EAAE,OAAO,EAAC,CAAC,CAAC;QACzE,QAAQ,CAAC,YAAY,CAAC,cAAI;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;gBACvC,IAAI,GAAG,GAAG;oBACR,SAAS,EAAE,IAAI,CAAC,SAAS;oBACzB,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI;oBACrC,GAAG,EAAE,IAAI,CAAC,GAAG;oBACb,QAAQ,EAAE,KAAI,CAAC,WAAW;iBAC3B;gBACD,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,yBAAyB,EAAE,GAAG,EAAE,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;oBACtG,EAAE,EAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;wBACpB,KAAI,CAAC,GAAG,CAAC,cAAc,CAAC,KAAI,CAAC,eAAe,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;wBAC9D,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;wBAC7B,KAAI,CAAC,eAAe,EAAE,CAAC;oBACzB,CAAC;gBACH,CAAC,EAAE,UAAC,KAAK;oBACP,KAAI,CAAC,GAAG,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC/C,CAAC,EAAE;oBACD,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC,CAAC;YACJ,CAAC;QACL,CAAC,CAAC;QACF,QAAQ,CAAC,OAAO,EAAE,CAAC;IACrB,CAAC;IAED,+CAAsB,GAAtB,UAAuB,OAAmB;QAA1C,iBA8BC;QA7BC,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;QACxD,QAAQ,CAAC,YAAY,CAAC,cAAI;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;gBACvC,IAAI,GAAG,GAAG;oBACR,SAAS,EAAE,IAAI,CAAC,SAAS;oBACzB,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,QAAQ,EAAE,IAAI,CAAC,IAAI;oBACnB,GAAG,EAAE,IAAI,CAAC,GAAG;oBACb,QAAQ,EAAE,KAAI,CAAC,WAAW;iBAC3B;gBACD,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,yBAAyB,EAAE,GAAG,EAAE,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;oBACtG,EAAE,EAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;wBACpB,KAAI,CAAC,GAAG,CAAC,cAAc,CAAC,KAAI,CAAC,eAAe,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;wBAC9D,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;wBAC7B,yBAAyB;oBAE3B,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,KAAI,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;oBAC5C,CAAC;gBACH,CAAC,EAAE,UAAC,KAAK;oBACP,KAAI,CAAC,GAAG,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC/C,CAAC,EAAE;oBACD,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC,CAAC;YACJ,CAAC;QACL,CAAC,CAAC;QACF,QAAQ,CAAC,OAAO,EAAE,CAAC;IACrB,CAAC;IAED,oCAAW,GAAX;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,EAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAC,CAAC,CAAC;IAC5D,CAAC;IAED,oCAAW,GAAX;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAC,CAAC,CAAC;IAChE,CAAC;IAED,sCAAa,GAAb,UAAe,OAAO;QACpB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;QACzC,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;QACzC,IAAI,CAAC,OAAO,CAAC,iBAAiB,GAAG,OAAO,CAAC,iBAAiB,CAAC;QAC3D,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC;QACzC,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,EAAE,CAAC;QACpC,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC;QACvD,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;QACrC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACrC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;QACzC,+BAA+B;QAC/B,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,IAAI,MAAM,GAAE,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;QACtC,IAAM,OAAO,GAAG;YACd,WAAW,EAAE,MAAM;YACnB,IAAI,EAAC,IAAI,CAAC,OAAO,CAAC,QAAQ;SACvB;QACD,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAC1C,QAAQ,CAAC,KAAK,CAAC,oBAAoB,EAAC,OAAO,CAAC,CAAC;IAEnD,CAAC;IAED,qCAAY,GAAZ;QAAA,iBAQC;QAPC,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,EAAE,EAAC,YAAY,EAAG,IAAI,CAAC,YAAY,EAAC,CAAC,CAAC;QAC3F,SAAS,CAAC,YAAY,CAAC,cAAI;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3B,CAAC;QACL,CAAC,CAAC;QACF,SAAS,CAAC,OAAO,EAAE,CAAC;IACtB,CAAC;IAjLU,cAAc;QAJ1B,wEAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;WACG;SAC/B,CAAC;uBAyBqT;OAxB1S,cAAc,CAmL1B;IAAD,CAAC;AAAA;SAnLY,cAAc,e","file":"19.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SelectloanPage } from './selectloan';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    SelectloanPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SelectloanPage),\n    TranslateModule.forChild()\n  ],\n})\nexport class SelectloanPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/selectloan/selectloan.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, AlertController, ToastController } from 'ionic-angular';\nimport { Loader, Api, Session } from '../../providers';\nimport { Storage } from '@ionic/storage';\nimport { TranslateService } from '@ngx-translate/core';\nimport { HttpHeaders, HttpClient, HttpRequest } from '@angular/common/http';\nimport { Headers,RequestOptions } from '@angular/http';\ndeclare let Smartech:any;\n/**\n * Generated class for the SelectloanPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-selectloan',\n  templateUrl: 'selectloan.html',\n})\nexport class SelectloanPage {\n\n  isReadyToProceed: boolean;\n\n  phoneNumber: string;\n\n  sessionKey: string;\n\n  accountSelected: boolean;\n\n  bankaccounts: any = [];\n\n  selectedAccount: any = [];\n\n  request : any = {};\n\n  accountAddedMsg: string;\n\n  noAccountMsg: string;\n\n  isBusy: boolean = false;\n\n  isSavedAccounts: boolean = false;\n\n  constructor(public translateService: TranslateService, public session: Session, public toastCtrl: ToastController, public storage: Storage, public alertCtrl: AlertController, public navCtrl: NavController, public navParams: NavParams, public modalCtrl: ModalController, public api: Api, public loading: Loader) {\n    this.translateService.get('ACCOUNTADDED_MSG').subscribe((value) => {\n      this.accountAddedMsg = value;\n    });\n\n    this.translateService.get('NOACCOUNT_MSG').subscribe((value) => {\n      this.noAccountMsg = value;\n    })\n  }\n\n  ionViewDidLoad() {\n    let request = this.navParams.get('request');\n    this.request = request;\n    console.log(this.request);\n\n    this.phoneNumber = this.session._getPhoneNumber();\n\n    this.sessionKey = this.session._getSessionKey();\n\n    this.getbankaccounts();\n  }\n\n  getbankaccounts() {\n    this.loading.show('Fetching bank accounts...')\n    this.isBusy = true\n    this.api.get('mobile/get-bank-accounts', {'phoneNumber':this.phoneNumber}, this.api._injectAuth(this.sessionKey)).subscribe((res: any) => {\n      console.log('get bank account',res)\n      if (res.code == '00') {\n        this.bankaccounts = res.data;\n        if( !this.bankaccounts.length ) {\n          this.showAddaccountownModal();\n        }\n        //return;\n      }   \n\n    }, (error) => {\n      this.api.messageHandler(error.error.message);\n    }, () => {\n      this.loading.hide();\n      this.isBusy = false;\n    })\n  }\n\n  doRefresh(refresher) {\n    this.getbankaccounts();\n    setTimeout(() => {\n      refresher.complete();\n    }, 2000);\n  }\n\n  showAddaccountModal(ownbank ? : boolean) {\n    console.log(ownbank);\n    let addModal = this.modalCtrl.create('AddaccountPage', {ownbank: ownbank});\n      addModal.onDidDismiss(item => {\n        if (item) {\n          this.loading.show('Adding account...');\n          var req = {\n            accountNo: item.accountNo,\n            accountType: item.accountType,\n            bankCode: ownbank ? '070' : item.bank,\n            bvn: item.bvn,\n            clientNo: this.phoneNumber\n          }\n          this.api.post('mobile/add-bank-account', req, this.api._injectAuth(this.sessionKey)).subscribe((res: any) => {\n            if(res.code == '00') {\n              this.api.messageHandler(this.accountAddedMsg, 3000, 'bottom');\n              this.selectAccount(res.data);\n              this.getbankaccounts();\n            }\n          }, (error) => {\n            this.api.messageHandler(error.error.message);\n          }, () => {\n            this.loading.hide();\n          })\n        }\n    })\n    addModal.present();\n  }\n\n  showAddaccountownModal(ownbank ? : boolean) {\n    let addModal = this.modalCtrl.create('AddownaccountPage');\n      addModal.onDidDismiss(item => {\n        if (item) {\n          this.loading.show('Adding account...');\n          var req = {\n            accountNo: item.accountNo,\n            accountType: item.accountType,\n            bankCode: item.bank ,\n            bvn: item.bvn,\n            clientNo: this.phoneNumber\n          }\n          this.api.post('mobile/add-bank-account', req, this.api._injectAuth(this.sessionKey)).subscribe((res: any) => {\n            if(res.code == '00') {\n              this.api.messageHandler(this.accountAddedMsg, 3000, 'bottom');\n              this.selectAccount(res.data);\n              //this.getbankaccounts();\n\n            }\n            else {\n              this.api.messageHandler(res, 5000, 'top');\n            }\n          }, (error) => {\n            this.api.messageHandler(error.error.message);\n          }, () => {\n            this.loading.hide();\n          })\n        }\n    })\n    addModal.present();\n  }\n\n  gotoAddCard() {\n    this.navCtrl.push('AddcardPage', {request: this.request});\n  }\n\n  gotoConfirm() {\n    this.navCtrl.push('ConfirmloanPage', {request: this.request});\n  }\n\n  selectAccount (account) {\n    this.accountSelected = true;\n    this.selectedAccount = account;\n    this.request.bankCode = account.bankCode;\n    this.request.bankName = account.bankName;\n    this.request.censoredAccountNo = account.censoredAccountNo;\n    this.request.code = account.code || null;\n    this.request.accountId = account.id;\n    this.request.lastUseAccount = account.lastUsed || null;\n    this.request.message = account.message || null;\n    this.request.msisdn = account.msisdn;\n    console.log('Request', this.request);\n    console.log('bank',this.request.bankName)\n    //this.isReadyToProceed = true;\n    this.gotoAddCard();\n\n    let custId= this.session._getCustID();\n    const payload = {\n      CUSTOMER_ID :custId,\n      BANK:this.request.bankName\n        }\n        Smartech.setIdentity(payload.CUSTOMER_ID);\n        Smartech.track(\"Loan_Offer_StepTwo\",payload);\n\n  }\n\n  showAccounts() {\n    let listModal = this.modalCtrl.create('AccountlistPage', {bankaccounts : this.bankaccounts});\n      listModal.onDidDismiss(item => {\n        if (item) {\n          this.selectAccount(item);\n        }\n    })\n    listModal.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/selectloan/selectloan.ts"],"sourceRoot":""}